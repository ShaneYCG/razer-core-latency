
<html>
	<head>
		<style>
			html {
				background: #eee;
				font: Georgia, Times, serif;
			}
			body {
				margin: auto;
				text-align: center;
				max-width: 825px;
				padding: 10px;
				padding-bottom: 50px;
			}
			h1 {
				font-size: 2em;
				margin: 0 0 0.5em 0;
				text-align: left;
				text-shadow: 0 1px 0 #fff;
			}
			h2 {
				font-size: 1.5em;
				margin: 1em 0 1em 0;
				text-align: left;
			}
			sub {
				display: block;
				font-size: 1em;
				margin: 0 0 1em 0;
				width: 100%;	
				text-align: left;
				text-shadow: 0 1px 0 #fff;
			}
			p {
				text-align: left;
			}
			ul, ol {
				text-align: left;
			}
			div.image {
				display: inline;
			}
			img {
				max-width: 100%;
				height: auto;
			}
		</style>
		<title>Razer Core Latency Testing</title>
	</head>
	<body>
		<h1>Razer Core Latency Testing</h1>
		<sub>
			By Shane Calimlim
			<a href="mailto:shanecalimlim@gmail.com">email</a>
			<a href="https://twitter.com/ShaneCalimlim">twitter</a>
		</sub>
		<p>
			This year I decided to try using a laptop as my sole home machine. A good year to pick it seemed! The Razer
			Blade (2016) is a powerhouse in an extremely portable form factor, and the Razer Core would give me the GPU
			oomph I <i>need</i>.
		</p>
		<p>
			The Blade is great, even without the Core it's a fantastic laptop: it does everything I want, and easily
			goes with me. Chroma is pretty cool too :) I've loved the Core so far too, while the Blade's 970M is no
			slouch, finally cranking up some settings back to what I'm used to felt awfully good.
		</p>
		<p>
			Most of the games I've been playing lately are not twitchy. But I booted up Doom to check how performance
			was and, while framerate was solid, it felt a bit off. I'm very sensitive to input latency in shooters so
			I was immediately a little suspicious.
		</p>
		<p>
			It wasn't a big surprise. Before I ordered the Core I suspected there would be additional latency,
			particularly if it was used to power the laptop display. Not only must it send data over Thunderbolt to the
			GPU, the framebuffer needs to come back over, and then be displayed through another GPU. I have a latency
			testing rig that I use to test our engine/rendering tech at work and decided to apply it to the Core.
		</p>
		<h2>Testing Setup &amp; Procedure</h2>
		<p>
			<ul>
				<li>Razer GPU Switcher v1.0.2.4, GeForce Driver 368.39</li>
				<li>GeForce GTX 970M internal, GeForce GTX 1070 external</li>
				<li>A small program that clears the screen as fast as it can (vsync off); selecting the color based on whether the space bar is pressed</li>
				<li>A 1000 fps camera</li>
				<li>A keyboard with a Post-it note sticking up from the space bar</li>
				<li>Something heavy to drop</li>
			</ul>
		</p>
		<img src="setup.jpg">
		<p>
			I turn the camera on, drop something on the space bar, and check how many frames elapsed between the space
			bar beginning movement (when I see the Post-it move) and when the screen changes color.
		</p>
		<p>
			This is definitely a bit crude! There are a lot of things that aren't quite as precise as I'd like.
			However, the room for mechanical/human imprecision affecting the results is only a few milliseconds, so
			results are consistent enough that meaningful comparisons can still be made.
		</p>
		<p>
			<b>Because of the variables in my test setup, the specific results are only meaningful in this comparison.
			They are not objectively useful in isolation.</b>
		</p>
		<p>
			I'll be testing two things:
			<ol>
				<li>How does latency compare between the Core and internal GPU when using the laptop's internal display?</li>
				<li>And how does it compare when an external display is used?</li>
			</ol>
		<h2>Results: Internal Display</h2>
		<img src="results-internal.png">
		<p>
			There is an odd outlier in the "External GPU" column, likely due to unlucky alignment of refresh rate and
			possibly the OS deciding to shuffle some threads around, but the amount it skews the results is very small.
			Overall, the results are in the expected consistency range to show that the test methodology is working.
		</p>
		<p>
			As expected there is additional latency, 30ms after averaging.
		</p>
		<p>
			It may be important to consider that by not using vsync and by rendering at an extremely high frame rate,
			I may be saturating the Thunderbolt bandwidth sending hundreds or thousands of framebuffers back per
			second, possibly hurting the Core's results. It would be interesting to run another test with
			vsync on, or at least a throttled frame rate.
		</p>
		<h2>Results: External Display</h2>
		<img src="results-external.png">
		<p>
			Again there are some interesting outliers for the external GPU, this time going the other direction. These
			probably got lucky with refresh rate alignment, likely amplified by the GPU being much faster: spitting
			out more frames makes it more likely to get closer to the monitor's refresh. Their skewing of the average
			is small, and overall the test results land in a consistent range.
		</p>
		<p>
			Response time for powering an external display with the internal GPU was a bit faster than powering the
			laptop's display, possibly indicating that the external display had a faster response time, but is
			definitely within the margin of error for my test setup.
		</p>
		<h2>Conclusion</h2>
		<p>
			I'm glad I got my Core! It adds that oomph I've been missing since going laptop. But if I'm playing an FPS
			and only have my laptop as a monitor, I'd probably opt to drop the settings and play on the 970M instead
			of the Core's 1070.
		</p>
		<p>
			Razer did not design the Core to be portable. Soon I should have a proper desk setup again with solid
			gaming monitors. I think then I'll be hitting the real target audience for this device: people with a
			proper gaming station that just replace the tower with a laptop. And it looks like the Core should do
			excellently there.
		</p>
	</body>
</html>
